
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Adventures in JavaScript Development</title>
  <meta name="author" content="Rebecca Murphey">

  
  <meta name="description" content="I used to work in newspapers, and we were diligent about fixing &#8220;bad breaks&#8221; in headlines. Nothing looks worse than a headline that&#8217 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://rmurphey.com/blog/page/9/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Adventures in JavaScript Development" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-143877-10']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Adventures in JavaScript Development</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:rmurphey.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/01/13/fix-uneven-line-lengths-in-headlines/">Fix Uneven Line Lengths in Headlines</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-13T00:00:00-06:00" pubdate data-updated="true">Jan 13<span>th</span>, 2008</time>
        
         | <a href="/blog/2008/01/13/fix-uneven-line-lengths-in-headlines/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I used to work in newspapers, and we were diligent about fixing &#8220;bad breaks&#8221; in headlines. Nothing looks worse than a headline that&#8217;s far longer on one line than on another. Desktop publishing software has some intelligence about these bad breaks, but the web, not so much. A little jQuery can clean up the bad breaks, though &#8211; for example, this will clean up all the <code>h2</code>s.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;h2&#39;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$h2</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// get the height of the existing element</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="nx">$h2</span><span class="p">.</span><span class="nx">height</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// get the text of the existing element</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">text</span> <span class="o">=</span> <span class="nx">$h2</span><span class="p">.</span><span class="nx">text</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// put temporary text in the element</span>
</span><span class='line'>  <span class="c1">// that will make the element one line tall</span>
</span><span class='line'>  <span class="nx">$h2</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s1">&#39;temp&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// get the height of the one-line element</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">singleLineHeight</span> <span class="o">=</span> <span class="nx">$h2</span><span class="p">.</span><span class="nx">height</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// check to see if the initial element was</span>
</span><span class='line'>  <span class="c1">// taller than the one-line element;</span>
</span><span class='line'>  <span class="c1">// if so, look for the midpoint of the</span>
</span><span class='line'>  <span class="c1">// initial text and split it there</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">height</span> <span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="nx">singleLineHeight</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">mid</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">length</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">mid</span><span class="p">;</span> <span class="nx">i</span><span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">text</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">breakIndex</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
</span><span class='line'>        <span class="k">break</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">newText</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="err">&#39;</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">newText</span> <span class="o">=</span> <span class="nx">newText</span> <span class="o">+</span> <span class="nx">text</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="nx">$h2</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">newText</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// otherwise, put the initial text</span>
</span><span class='line'>    <span class="c1">// back in the element and move on</span>
</span><span class='line'>    <span class="nx">$h2</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>So you end up changing this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>This is a very long headline that goes on and then breaks
</span><span class='line'>badly</span></code></pre></td></tr></table></div></figure>


<p>to something like this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>This is a very long headline that
</span><span class='line'>goes on and then breaks badly</span></code></pre></td></tr></table></div></figure>


<p>You&#8217;ll want to change the <code>$('h2')</code> selector to exactly what you need; in the case of this blog, <code>$('div.post h2 a')</code> is actually more appropriate. You&#8217;re going to be best off if matching elements contain only text, and no HTML.</p>

<p>Also, this will only work for elements that are one or two lines long; for headlines of arbitrary length, you&#8217;d need to see exactly how the height of the initial element compared to the height of the temporary one-line element, and then split the headline multiple times. Then again, thinking back to my newspaper days where we had to convey a whole story in four words, you might ask yourself whether you actually need a headline that&#8217;s more than two lines long.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/01/10/solved-ajax-returns-bad-results-in-internet-explorer/">Solved: AJAX Returns Bad Results in Internet Explorer</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-10T00:00:00-06:00" pubdate data-updated="true">Jan 10<span>th</span>, 2008</time>
        
         | <a href="/blog/2008/01/10/solved-ajax-returns-bad-results-in-internet-explorer/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Note to self: IE6 likes to cache AJAX requests, and this can be a bad thing if other data on the page that will affect the result of the request has changed.</p>

<p>You&#8217;ll see this if you have two fields on a page that both contribute to a result, but only send them to the server when one of them has changed.</p>

<p>Let&#8217;s say field1 and field2 get multiplied on the server side, and both start out with values of 1. So, in IE6:</p>

<ul>
<li>Set field1 to 1000: Response is 1000.</li>
<li>Set field1 to 100: Response is 100.</li>
<li>Set field2 to 123: Response is 12300</li>
<li>Set field 1 back to 1000: <strong>Uh oh! Response is 1000 again!</strong>
</li>
</ul>


<p>IE6 has decided that the result from the first time you set field1 to 1000 was good enough, and it doesn&#8217;t look to see that the new result is different.</p>

<p>The solution? Add a timestamp to your requests, so each one will look different to IE even if the real data is the same:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// just an example; you&#39;d</span>
</span><span class='line'><span class="c1">// obviously build this from</span>
</span><span class='line'><span class="c1">// the field itself</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="s1">&#39;field1=1000&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// build the timestamp</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
</span><span class='line'><span class="nx">data</span> <span class="o">=</span> <span class="nx">data</span> <span class="o">+</span> <span class="s1">&#39;&amp;amp;&#39;</span> <span class="o">+</span> <span class="nx">timestamp</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// now you can send your data</span>
</span><span class='line'><span class="c1">// using ajax</span>
</span></code></pre></td></tr></table></div></figure>


<p>Thankfully, when this happened to me yesterday, I had a coworker who only needed a couple of minutes with the server logs to figure out what was happening. After he figured it out here, I found <a href="http://groups.google.com/group/jquery-en/browse_thread/thread/a40b6fb572232e3b">this thread</a>, which verified the cause, and I was able to solve it in a few minutes.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/01/08/cycle-through-list-elements-with-jquery/">Cycle Through List Elements With jQuery</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-08T00:00:00-06:00" pubdate data-updated="true">Jan 8<span>th</span>, 2008</time>
        
         | <a href="/blog/2008/01/08/cycle-through-list-elements-with-jquery/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;ve written several versions of this functionality, and each time I revisit it, it gets simpler and I feel silly for how complicated I made it before. The thing to remember when you&#8217;re working with jQuery is to <strong>always leverage the DOM</strong>. <a href="http://www.christianmontoya.com/2007/12/10/how-i-learned-to-stop-programming-and-love-the-dom/">Christian Montoya has a good writeup</a> about how he came to the same realization, and it&#8217;s worth a read.</p>

<p>In the meantime, here&#8217;s my latest iteration of cycling through items in an unordered list. In the example below, I&#8217;ve just put straight-up text in the list items, but they could contain entire <code>div</code>s of content if you wanted.</p>

<p>First, let&#8217;s assume we have this HTML:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;ul&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;</span>Item 1<span class="nt">&lt;/li&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;</span>Item 2<span class="nt">&lt;/li&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;</span>Item 3<span class="nt">&lt;/li&gt;</span>
</span><span class='line'><span class="nt">&lt;/ul&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>We&#8217;ll start by verifying that there&#8217;s more than one item before we do all the rest of the work. (Of course, if your list length doesn&#8217;t vary, this <code>if</code> isn&#8217;t necessary.)</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">$list</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#myList&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">$list</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Following the principles of progressive enhancement, we don&#8217;t want to include navigation elements in the HTML if they will only work with Javascript; rather, we want to add them with Javascript:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">$list</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#myList&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">$list</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// put the nav before the list</span>
</span><span class='line'>  <span class="nx">$list</span><span class="p">.</span><span class="nx">before</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// style the nav as needed</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#nav&#39;</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span><span class="nx">textAlign</span><span class="o">:</span> <span class="s1">&#39;right&#39;</span><span class="p">});</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#nav img&#39;</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span><span class="nx">cursor</span><span class="o">:</span> <span class="s1">&#39;pointer&#39;</span><span class="p">});</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#nav img:first&#39;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">,</span><span class="s1">&#39;backButton.gif&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#nav img:last&#39;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">,</span><span class="s1">&#39;forwardButton.gif&#39;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The comes the fun part: adding the behaviors to the nav buttons. This is where it pays to keep in mind the power of the DOM; in past iterations of this, I&#8217;ve seriously overthought the logic.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">$list</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#myList&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">$list</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// put the nav before the list</span>
</span><span class='line'>  <span class="nx">$list</span><span class="p">.</span><span class="nx">before</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// style the nav as needed</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#nav&#39;</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span><span class="nx">textAlign</span><span class="o">:</span> <span class="s1">&#39;right&#39;</span><span class="p">});</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#nav img&#39;</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span><span class="nx">cursor</span><span class="o">:</span> <span class="s1">&#39;pointer&#39;</span><span class="p">});</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// add the back button behavior</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#nav img:first&#39;</span><span class="p">).</span>
</span><span class='line'>    <span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">,</span><span class="s1">&#39;backButton.gif&#39;</span><span class="p">).</span>
</span><span class='line'>    <span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;li:visible&#39;</span><span class="p">,</span><span class="nx">$list</span><span class="p">).</span>
</span><span class='line'>        <span class="nx">hide</span><span class="p">().</span>
</span><span class='line'>        <span class="nx">prev</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">).</span>
</span><span class='line'>          <span class="nx">show</span><span class="p">();</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// add the forward button behavior</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#nav img:last&#39;</span><span class="p">).</span>
</span><span class='line'>    <span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">,</span><span class="s1">&#39;forwardButton.gif&#39;</span><span class="p">).</span>
</span><span class='line'>    <span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;li:visible&#39;</span><span class="p">,</span><span class="nx">$list</span><span class="p">).</span>
</span><span class='line'>        <span class="nx">hide</span><span class="p">().</span>
</span><span class='line'>        <span class="nx">next</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">).</span>
</span><span class='line'>          <span class="nx">show</span><span class="p">();</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>But what happens if there&#8217;s not a next <code>li</code> when you click on the forward button, or a previous <code>li</code> when you click on the back button?</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">$list</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#myList&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">$list</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// put the nav before the list</span>
</span><span class='line'>  <span class="nx">$list</span><span class="p">.</span><span class="nx">before</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// style the nav as needed</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#nav&#39;</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span><span class="nx">textAlign</span><span class="o">:</span> <span class="s1">&#39;right&#39;</span><span class="p">});</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#nav img&#39;</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span><span class="nx">cursor</span><span class="o">:</span> <span class="s1">&#39;pointer&#39;</span><span class="p">});</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// add the back button behavior</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#nav img:first&#39;</span><span class="p">).</span>
</span><span class='line'>    <span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">,</span><span class="s1">&#39;backButton.gif&#39;</span><span class="p">).</span>
</span><span class='line'>    <span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;li:visible&#39;</span><span class="p">,</span><span class="nx">$list</span><span class="p">).</span>
</span><span class='line'>        <span class="nx">hide</span><span class="p">().</span>
</span><span class='line'>        <span class="nx">prev</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">).</span>
</span><span class='line'>          <span class="nx">show</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1">// if there wasn&#39;t a previous li,</span>
</span><span class='line'>      <span class="c1">// show the last li in the list</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;li:visible&#39;</span><span class="p">,</span><span class="nx">$list</span><span class="p">).</span><span class="nx">length</span>
</span></code></pre></td></tr></table></div></figure>


<p>One last thing: we need to hide all the list items and then show the first one:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">$list</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#myList&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">$list</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// hide all the list items and show the first one</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">,</span><span class="nx">$list</span><span class="p">).</span><span class="nx">hide</span><span class="p">().</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// put the nav before the list</span>
</span><span class='line'>  <span class="nx">$list</span><span class="p">.</span><span class="nx">before</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// style the nav as needed</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#nav&#39;</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span><span class="nx">textAlign</span><span class="o">:</span> <span class="s1">&#39;right&#39;</span><span class="p">});</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#nav img&#39;</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span><span class="nx">cursor</span><span class="o">:</span> <span class="s1">&#39;pointer&#39;</span><span class="p">});</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// add the back button behavior</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#nav img:first&#39;</span><span class="p">).</span>
</span><span class='line'>    <span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">,</span><span class="s1">&#39;backButton.gif&#39;</span><span class="p">).</span>
</span><span class='line'>    <span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;li:visible&#39;</span><span class="p">,</span><span class="nx">$list</span><span class="p">).</span>
</span><span class='line'>        <span class="nx">hide</span><span class="p">().</span>
</span><span class='line'>        <span class="nx">prev</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">).</span>
</span><span class='line'>          <span class="nx">show</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1">// if there wasn&#39;t a previous li,</span>
</span><span class='line'>      <span class="c1">// show the last li in the list</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;li:visible&#39;</span><span class="p">,</span><span class="nx">$list</span><span class="p">).</span><span class="nx">length</span>
</span></code></pre></td></tr></table></div></figure>


<p>For extra fun:</p>

<ul>
<li>
<a href="http://blog.rebeccamurphey.com/2007/12/11/jquery-plugin-randomly-reorder-children-elements/">Randomly reorder</a> the list items before you add the rest of the code</li>
<li>Instead of <code>show()</code> and <code>hide()</code>, try <code>fadeIn()</code> and <code>fadeOut()</code>
</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/01/06/unobtrusive-cross-browser-method-to-add-icons-to-links/">Unobtrusive, Cross-browser Method to Add Icons to Links</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-06T00:00:00-06:00" pubdate data-updated="true">Jan 6<span>th</span>, 2008</time>
        
         | <a href="/blog/2008/01/06/unobtrusive-cross-browser-method-to-add-icons-to-links/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>There are <a href="http://www.askthecssguy.com/2006/12/showing_hyperlink_cues_with_cs_1.html">lots</a> of <a href="http://www.creativewebspecialist.co.uk/CSS_attributes/">examples</a> of using CSS to add filetype icons to links, but they all rely on advanced CSS selectors, which Internet Explorer 6 doesn&#8217;t support.</p>

<p>If you&#8217;re looking for a cross-browser method of adding filetype icons to links, you have a couple of choices: you can add a class name to all of your links and target that class name with CSS that IE6 can understand; or you can let Javascript add the links dynamically based on the extension it finds at the end of each URL. The class name method is fine if you don&#8217;t mind adding the class to all of your links in your HTML, but the Javascript method will figure out which links get which icon automatically.</p>

<h3>The Javascript/jQuery method</h3>


<p>This uses my favorite Javascript library, <a href="http://jquery.com">jQuery</a>; you&#8217;ll need to include the library in your document, and then either put the icon-adding code in another file you include, or put it inline with your HTML. It&#8217;s good practice to put all your jQuery code inside <code>$.ready()</code>, <a href="http://docs.jquery.com/Events/ready#fn">to be executed when the document is ready to be manipulated</a>, but I&#8217;ve left that part out here for brevity.</p>

<p><strong>Round 1:</strong> Because <a href="http://docs.jquery.com/Selectors">jQuery supports CSS1-3</a>, you can mimic the CSS rule that wouldn&#8217;t work in IE6:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;a[href$=&amp;quot;.doc&amp;quot;]&#39;</span><span class="p">).</span>
</span><span class='line'>  <span class="nx">css</span><span class="p">({</span>
</span><span class='line'>    <span class="c1">// use paddingLeft instead of padding-left;</span>
</span><span class='line'>    <span class="c1">// jQuery (and Javascript) use camelCase</span>
</span><span class='line'>    <span class="c1">// for CSS attributes instead of hyphenation</span>
</span><span class='line'>    <span class="nx">paddingLeft</span><span class="o">:</span> <span class="s1">&#39;18px&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">background</span><span class="o">:</span> <span class="s1">&#39;transparent url(&amp;quot;word-doc.gif&amp;quot;) no-repeat center left&#39;</span>
</span><span class='line'>  <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Round 2:</strong> You <em>could</em> do one of these snippets for each file type, but with jQuery, you can take advantage of the <a href="http://docs.jquery.com/Utilities/jQuery.each#objectcallback">$.each() utility method</a> to do a loop, eliminating redundant code:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// first, create an object</span>
</span><span class='line'><span class="c1">// that contains information</span>
</span><span class='line'><span class="c1">// about how file extensions</span>
</span><span class='line'><span class="c1">// correspond to images</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">fileTypes</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// extension: &#39;image file&#39;</span>
</span><span class='line'>  <span class="nx">doc</span><span class="o">:</span> <span class="s1">&#39;doc.gif&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">xls</span><span class="o">:</span> <span class="s1">&#39;xls.gif&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">pdf</span><span class="o">:</span> <span class="s1">&#39;pdf.gif&#39;</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// then, loop over the object</span>
</span><span class='line'><span class="c1">// using jQuery&#39;s $.each()</span>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">fileTypes</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">extension</span><span class="p">,</span><span class="nx">image</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;a[href$=&amp;quot;&#39;</span> <span class="o">+</span> <span class="nx">extension</span> <span class="o">+</span> <span class="s1">&#39;&amp;quot;]&#39;</span><span class="p">).</span>
</span><span class='line'>    <span class="nx">css</span><span class="p">({</span>
</span><span class='line'>      <span class="nx">paddingLeft</span><span class="o">:</span> <span class="s1">&#39;18px&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">background</span><span class="o">:</span> <span class="s1">&#39;transparent url(&amp;quot;&#39;</span> <span class="o">+</span> <span class="nx">image</span> <span class="o">+</span> <span class="s1">&#39;&amp;quot;) no-repeat center left&#39;</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Round 3:</strong> One problem with this: while jQuery does support these attribute selectors, in my experience they require some pretty heavy lifting to do the pattern matching, which can slow things down significantly. Since the method above would require multiple selections (one for each extension/image combination), it makes sense to try a different way that will require fewer selections and less pattern matching:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">fileTypes</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">doc</span><span class="o">:</span> <span class="s1">&#39;doc.gif&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">xls</span><span class="o">:</span> <span class="s1">&#39;xls.gif&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">pdf</span><span class="o">:</span> <span class="s1">&#39;pdf.gif&#39;</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// this is like $.each() above, except</span>
</span><span class='line'><span class="c1">// it iterates over the matched elements</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// get a jQuery object for each anchor found</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">$a</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// get the href attribute</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">href</span> <span class="o">=</span> <span class="nx">$a</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;href&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// get the extension from the href</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">hrefArray</span> <span class="o">=</span> <span class="nx">href</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">extension</span> <span class="o">=</span> <span class="nx">hrefArray</span><span class="p">[</span><span class="nx">hrefArray</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">image</span> <span class="o">=</span> <span class="nx">fileTypes</span><span class="p">[</span><span class="nx">extension</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">image</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">$a</span><span class="p">.</span><span class="nx">css</span><span class="p">({</span>
</span><span class='line'>      <span class="nx">paddingLeft</span><span class="o">:</span> <span class="s1">&#39;18px&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">background</span><span class="o">:</span> <span class="s1">&#39;transparent url(&amp;quot;&#39;</span> <span class="o">+</span> <span class="nx">image</span> <span class="o">+</span> <span class="s1">&#39;&amp;quot;) no-repeat center left&#39;</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>And in fact, in limited testing using Firebug, this second version is faster than the first if you have more than two filetypes (and thus more than two selections).</p>

<h3>Taking it further</h3>


<p>You can also add a different icon to external links, and only add filetype icons to internal links:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">fileTypes</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">doc</span><span class="o">:</span> <span class="s1">&#39;doc.gif&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">xls</span><span class="o">:</span> <span class="s1">&#39;xls.gif&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">pdf</span><span class="o">:</span> <span class="s1">&#39;pdf.gif&#39;</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">$a</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">href</span> <span class="o">=</span> <span class="nx">$a</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;href&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span>
</span><span class='line'>    <span class="p">(</span><span class="nx">href</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^http/</span><span class="p">))</span> <span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span>
</span><span class='line'>    <span class="p">(</span><span class="o">!</span> <span class="nx">href</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">domain</span><span class="p">))</span>
</span><span class='line'>  <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// use a special image for external links</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">image</span> <span class="o">=</span> <span class="s1">&#39;external.gif&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// get the extension from the href</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">hrefArray</span> <span class="o">=</span> <span class="nx">href</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">extension</span> <span class="o">=</span> <span class="nx">hrefArray</span><span class="p">[</span><span class="nx">hrefArray</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">image</span> <span class="o">=</span> <span class="nx">fileTypes</span><span class="p">[</span><span class="nx">extension</span><span class="p">];</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">image</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">$a</span><span class="p">.</span><span class="nx">css</span><span class="p">({</span>
</span><span class='line'>      <span class="nx">paddingLeft</span><span class="o">:</span> <span class="s1">&#39;18px&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">background</span><span class="o">:</span> <span class="s1">&#39;transparent url(&amp;quot;&#39;</span> <span class="o">+</span> <span class="nx">image</span> <span class="o">+</span> <span class="s1">&#39;&amp;quot;) no-repeat center left&#39;</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Or, only add icons to certain links, like a list of files in an unordered list, by changing your selector from <code>$('a')</code> to <code>$('ul#fileList a')</code>.</p>

<h3>Resources</h3>


<ul>
<li>There are nuances to the CSS you&#8217;ll want to apply to your links; the above is just an example of something that may or may not work for you. <a href="http://www.askthecssguy.com/2006/12/showing_hyperlink_cues_with_cs_1.html">Read more here</a> about how to style the links so your background images appear as you want them to.</li>
<li>If you&#8217;re using transparent PNGs for your background images, <a href="http://www.twinhelix.com/css/iepngfix/">iepngfix</a> will save the day.</li>
<li>
<a href="http://www.famfamfam.com/lab/icons/silk/">famfamfam</a> has some great icons available for free under the Creative Commons Attribution 2.5 License.</li>

</ul>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/01/04/salivating-over-server-side-javascript/">Salivating Over Server-side Javascript</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-04T00:00:00-06:00" pubdate data-updated="true">Jan 4<span>th</span>, 2008</time>
        
         | <a href="/blog/2008/01/04/salivating-over-server-side-javascript/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I came across <a href="http://unclescript.blogspot.com/2008/01/end-of-web-frameworks.html">The End of Web Frameworks</a> in my dzone RSS feed this morning, and it echoes a thought that runs through my brain as I get more and more comfortable with jQuery: who needs the server when you&#8217;ve got Javascript? Wouldn&#8217;t it be great if the server just handed out data, and the client figured out what to do with it? After talking directly to the DOM for the last several months, a trip back to PHP left me utterly disoriented for a few minutes &#8211; why, exactly, couldn&#8217;t I take the anchors from that unordered list I&#8217;d just built 50 lines ago and reuse their hrefs for something else?</p>

<p>As a <a href="http://unclescript.blogspot.com/2008/01/end-of-web-frameworks.html#c8132224153158413680">couple</a> of <a href="http://unclescript.blogspot.com/2008/01/end-of-web-frameworks.html#c5149909265291802708">commenters</a> pointed out, it&#8217;s not that easy &#8211; there&#8217;s still graceful degradation (the yin to progressive enhancement&#8217;s yang?) to worry about. It&#8217;s easy to say &#8220;oh, I don&#8217;t have to worry about that,&#8221; but until the day that&#8217;s actually <em>true</em>, Javascript on the client side simply can only supplement good, solid, server-generated markup.</p>

<p>That&#8217;s why stuff like <a href="http://groups.google.com/group/jquery-en/browse_thread/thread/38d8d0c295b2919b">this discussion about server-side jQuery</a> has me nearly salivating. I&#8217;m imagining getting JSON data from a simple bit of server-side code that&#8217;s not encumbered by messy markup and then writing some Javascript to build the DOM of my dreams. The added bonus would be server-side code that could serve that clean, pretty JSON data up to anyone I wanted to have it.</p>

<p>Of course, that DOM would still need to use semantic HTML and not rely on client-side Javascript for anything &#8211; and not just because a visually or otherwise impaired person might drop by someday and want to use my site. <a href="http://blogs.cnet.com/8301-13530_1-9782891-28.html">Progressive enhancement is good for SEO</a>, too, (and so are web standards in general). One only wishes that would lead SEO-focused companies to fall all over themselves in pursuit of it :)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/01/03/suspicious-stumbleupon-bounce-rates/">Suspicious StumbleUpon Bounce Rates?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-03T00:00:00-06:00" pubdate data-updated="true">Jan 3<span>rd</span>, 2008</time>
        
         | <a href="/blog/2008/01/03/suspicious-stumbleupon-bounce-rates/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;ve been promoting some of my blog posts by submitting them to <a href="http://www.stumbleupon.com">StumbleUpon</a>, and it&#8217;s been generating a fair bit of traffic &#8211; my post &#8220;How I Learned CSS&#8221; has done especially well. I&#8217;ve been watching my site using Google Analytics, and I&#8217;ve noticed that visitors from StumbleUpon have a substantially lower <a href="http://en.wikipedia.org/wiki/Bounce_Rate">bounce rate</a> than, say, visitors from <a href="http://www.dzone.com">dzone</a>. So I think, &#8220;yay, StumbleUpon&#8221; and start submitting anything interesting I write to there.</p>

<p>But in poking around in my Google Analytics a bit more, I&#8217;ve also noticed that, on pages that I&#8217;ve promoted through SU, I&#8217;m seeing strange navigation patterns: for &#8220;How I Learned CSS,&#8221; 40% of visits to the page came from the page itself (and, as it logically follows, 40% of next pages were the page itself). The page was viewed a total of 4,700 times, but a little more than 2,800 of those pageviews were unique. Since bounce rate basically measures whether a new arrival went to another page before leaving the site, I&#8217;m not sure it shouldn&#8217;t count as a bounce if the second page the user visits is the same as the one they were already on.</p>

<p>I&#8217;m not seeing this pattern with pages I don&#8217;t promote on SU, which makes me curious. SU is clearly driving a ton of traffic to my site; it&#8217;s just not clear that the traffic is actually resulting in the remarkably low bounce rate that Google Analytics shows. If I took out the 40% of people whose next page was the page they were already on, I&#8217;m left with not even 1% of people who went to another, different page on the site before leaving &#8211; and suddenly dzone is looking good again.</p>

<p>I did a Google search and didn&#8217;t come up with much except <a href="http://www.wpdesigner.com/2007/09/15/wwmd-reduce-bounce-rate/#comment-87245">this</a>, which discusses the importance of bounce rate, and <a href="http://www.seowife.com/stumbleupon-advertising/">this</a>, which suggests using StumbleUpon to reduce your bounce rate.</p>

<p>I&#8217;m curious whether anyone else is seeing this, and whether it&#8217;s actually related to StumbleUpon, Google Analytics, or something else. If I had to guess, I&#8217;d imagine that this is a result of people using the StumbleUpon toolbar (since it&#8217;s not happening in all cases), and maybe the toolbar is pre-visiting the page on the user&#8217;s behalf to make sure it still exists?</p>

<p>Update: See the comments and a more <a href="http://www.jamieharrop.com/2007/11/05/my-stumbleupon-analysis-a-poor-500-traffic-increase/">in-depth discussion</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/01/02/update-page-using-json-data/">Update Page Using JSON Data</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-02T00:00:00-06:00" pubdate data-updated="true">Jan 2<span>nd</span>, 2008</time>
        
         | <a href="/blog/2008/01/02/update-page-using-json-data/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.rebeccamurphey.com/jquery/updateWithJSON/jquery.updateWithJSON.js">updateWithJSON</a> is a jQuery plugin that updates elements on your page based on key/value pairs in a JSON object. Usage:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">updateWithJSON</span><span class="p">(</span><span class="nx">jsonData</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><a href="http://www.rebeccamurphey.com/jquery/updateWithJSON/">Here&#8217;s a demo</a>, and here&#8217;s how it works:</p>

<ul>
<li>iterate over each property/value combination in the JSON object</li>
<li>look for an element in the DOM that matches the property name
<ul>
<li>first, look for an element with a matching <code>id</code> attribute</li>
<li>if no element with a matching ID is found, look for input, select or textarea elements with a matching <code>name</code> attribute</li>
</ul>
</li>
<li>update the value, contents or selection of the matched element(s) based on the value in the JSON object</li>
</ul>


<p>NOTE: If you have multiple checkboxes with the same <code>name</code> attribute, or a select that allows multiple values, you&#8217;ll need to pass the values of the selected items in an array:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="nx">text_input</span><span class="o">:</span> <span class="s1">&#39;value1&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">checkbox_group</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;value1&#39;</span><span class="p">,</span><span class="s1">&#39;value2&#39;</span><span class="p">,</span><span class="s1">&#39;value3&#39;</span><span class="p">],</span>
</span><span class='line'>  <span class="nx">multi_select</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;value4&#39;</span><span class="p">,</span><span class="s1">&#39;value5&#39;</span><span class="p">,</span><span class="s1">&#39;value6&#39;</span><span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you use a <code>name</code> attribute like &#8220;input[]&#8221; on a set of related checkboxes, remember that you&#8217;ll need to quote it in the JSON object:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s1">&#39;input1[]&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;value1&#39;</span><span class="p">,</span><span class="s1">&#39;value2&#39;</span><span class="p">,</span><span class="s1">&#39;value3&#39;</span><span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<h3>The back story</h3>


<p>For a recent project, I needed to update elements on a page based on some server-side calculations. JSON is a handy way to transport data from the server back to the browser, and jQuery&#8217;s <code>getJSON()</code> method makes it painless. So, for example, I was getting back</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span> <span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>with which I needed to update an element corresponding to &#8220;foo&#8221; and give it the value &#8220;bar&#8221;. Simple enough; on the page I was dealing with, it was easy to put a unique ID on every element that would need to be updated, and I matched that ID with the property name in the JSON object. It was (almost) as simple as this:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="o">+</span><span class="nx">name</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>It&#8217;s not always the case, though, that you can easily put a unique ID on each element that will need updating; for example, <a href="http://us.php.net/manual/en/language.variables.external.php#77344">PHP rewards you</a> if you put the same <code>name</code> attribute on related checkboxes. Having checkboxes with the same name but different IDs can quickly get confusing when you&#8217;re dealing with data on the client side and on the server side. The solution above worked in my particular case, but I wanted something that would work more broadly &#8211; say, on pages that had related checkboxes &#8211; and that&#8217;s how I came up with the plugin.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/12/30/determine-the-order-of-two-dom-elements/">Determine the Order of Two DOM Elements</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-12-30T00:00:00-06:00" pubdate data-updated="true">Dec 30<span>th</span>, 2007</time>
        
         | <a href="/blog/2007/12/30/determine-the-order-of-two-dom-elements/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Inspired by <a href="http://us.php.net/usort">this</a> from PHP, I wanted a
utility function to determine whether a given element came before or after
another element in the DOM.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">){</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">.</span><span class="nx">order</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$a</span><span class="p">,</span><span class="nx">$b</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">$a</span> <span class="o">=</span> <span class="nx">$a</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">$b</span> <span class="o">=</span> <span class="nx">$b</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="s1">&#39;order-test&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">$a</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">$b</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">c</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>        <span class="c1">// elements are the same</span>
</span><span class='line'>        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">$b</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">$elements</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="nx">c</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">$elements</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">c</span><span class="o">+</span><span class="s1">&#39;-first&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">$a</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">c</span><span class="o">+</span><span class="s1">&#39;-first&#39;</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>        <span class="c1">// $a is first</span>
</span><span class='line'>        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">$b</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">c</span><span class="o">+</span><span class="s1">&#39;-first&#39;</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>        <span class="c1">// $b is first</span>
</span><span class='line'>        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="p">})(</span><span class="nx">jQuery</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/12/24/how-i-learned-css/">How I Learned CSS</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-12-24T00:00:00-06:00" pubdate data-updated="true">Dec 24<span>th</span>, 2007</time>
        
         | <a href="/blog/2007/12/24/how-i-learned-css/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I remember when I first tried to understand how to produce designs for the web &#8211; coming from the paper-based world, it was hard for me to accept everything that was suddenly out of my control. When I first tried to grasp CSS with the help of now-defunct Adobe GoLive, I bailed pretty quickly. Table-based layout and font tags didn&#8217;t make much sense to me either &#8211; why did I have to slice up a page into a bunch of adjoining cells, instead of just drawing independent boxes like I did in Quark?</p>

<p>A couple of years later, I decided to try again, motivated by the realization that my <a href="http://gmurphey.com/">eight-years-younger brother</a> seemed to be better at this web stuff than I was. I spent untold hours trying to wrap my brain around <a href="http://www.sustainablewebdesign.com/resources/601/">the difference between margin and padding</a> and exactly how to <a href="http://css.maxdesign.com.au/floatutorial/">get floated elements to bend to my will</a>. I remember the epiphany that one could <a href="http://www.sovavsiti.cz/css/horizontal_menu.html">use left-floated list items for a horizontal menu</a>, or that <a href="http://www.netmechanic.com/news/vol4/html_no22.htm">the right DOCTYPE can force Internet explorer to behave more like a real browser</a>.</p>

<p>These days, I have an honest-to-god job doing this stuff, and every now and then, someone will ask me how they can learn it too. It all makes so much more sense to me than it used to that it&#8217;s hard to remember how I got here. In the interest of getting this stuff written down for passing along, though, here are a few thoughts:</p>

<h3>The Tools</h3>


<p>These are things without which the rest is impossible:</p>

<ul>
<li>
<strong>A text editor</strong> Notepad will do just fine; for a few bucks, you can get <a href="http://macromates.com/">TextMate</a> for Mac or the <a href="http://www.e-texteditor.com/">e Text Editor</a> for PC. If you use Dreamweaver, hide everything but the file navigator panel and the code editing view. <em>You will learn nothing from Dreamweaver&#8217;s &#8220;design&#8221; view.</em>
</li>
<li>
<strong><a href="http://www.mozilla.com/en-US/firefox/">Firefox</a></strong> You&#8217;ll need to test anything you do in Internet Explorer, but first, you&#8217;ll get it working in Firefox. Whereas Internet Explorer enjoys mocking web standards, Firefox does its best to adhere to them; plus, it has all sorts of extensions that make it easier to troubleshoot your work.</li>
<li>
<strong><a href="https://addons.mozilla.org/en-US/firefox/addon/60">Firefox Web Developer Toolbar</a></strong> This has all sorts of useful tools in it, including a real-time CSS editor that opens in the browser&#8217;s sidebar so you try changes to your CSS and see the results immediately.</li>
<li>
<strong><a href="https://addons.mozilla.org/en-US/firefox/addon/1843">Firebug</a></strong> This is most useful for Javascript debugging, but it has some nice features for debugging CSS as well.</li>
<li>
<strong><a href="http://users.skynet.be/mgueury/mozilla/">HTML Validator</a></strong> Incredibly helpful for finding errors in your HTML.</li>
</ul>


<p>(An aside: A few months ago I booted up an old laptop and found a preview release of Firefox 1.0 installed beside a well-worn Internet Explorer 6; when I abandoned the laptop, I was in the process of abandoning IE too. I can&#8217;t help but wonder how difficult my learning would have continued to be without the arrival of Firefox, which, with the extensions mentioned above, makes it so much more possible to learn all of this stuff in a very tangible, immediate sort of way.)</p>

<h3>Learning with Firefox</h3>


<p>Once you have the tools above, open Firefox and start with a page someone else built &#8211; like the one you&#8217;re on right now &#8211; and see what&#8217;s inside. It pays to be curious about every web page you visit; if you see something interesting, view the source and figure out how it got there. Some tips:</p>

<ul>
<li>
<code>Ctrl-U</code> will show you the HTML for a page, and with the HTML Validator extension, you can &#8220;clean up&#8221; the HTML so it&#8217;s easier to read.</li>
<li>
<code>Ctrl-Shift-E</code> will open the Web Developer Toolbar CSS editor, which will show you the CSS for the page, with a tab for each CSS file. You can edit the CSS in the editor and see the effects immediately.</li>
<li>
<code>F12</code> will open Firebug. In the top left of the panel that opens, click the Inspect menu item, then move your mouse back to the page itself and click on an element to find out more about it. You can also click on the HTML tab to view the HTML and expand and collapse sections of it to see the structure of the page. Hovering over an element in the HTML panel will highlight it on the page; clicking on an element will let you find out more about it in the Style and Layout tabs of Firebug. (Firebug is an incredibly powerful tool that you really need to play with to fully appreciate. It&#8217;s a completely non-destructive tool &#8211; you can&#8217;t hurt anything with it unless you try really, really hard &#8211; so don&#8217;t be afraid to click around and see what happens.)</li>
<li>Remember that these days, lots of page elements are built with Javascript rather than with straight HTML. <code>Ctrl-U</code> will show you only the HTML; Firebug will show you the &#8220;generated source,&#8221; including any elements built with Javascript. Firebug also lets you look at the Javascript on a page, which can be helpful when you&#8217;re trying to understand how something got there.
</li>
</ul>




<h3>POSH</h3>


<p><a href="http://www.456bereastreet.com/archive/200711/posh_plain_old_semantic_html/">Plain-old semantic HTML</a>. When you go to make a web page, write the simplest HTML you can, and use standard HTML elements whenever humanly possible. Start by creating HTML that represents the actual sections of the page &#8211; header, navigation, sidebar, content, footer &#8211; and give the elements names that say what they <em>are</em>, not where they go. When you think you&#8217;re done, view the HTML in a browser, without CSS, and see if it makes sense. Then, <em>and only then</em>, open the browser&#8217;s CSS editor and start styling the elements. See how far you can get without adding any design-related markup to your HTML. If you find yourself writing convoluted HTML or adding purely presentational markup, to make something work, it&#8217;s time to reconsider your approach. Once you have a good stylesheet started, copy it to your text editor and continue working on it there.</p>

<h3>Strategies</h3>


<p>It helps to give yourself deadlines, even if they&#8217;re imaginary. I&#8217;ve learned more about HTML, CSS and Javascript in the past 12 months than I learned in the three years before, and I think that&#8217;s largely because deadlines have forced me to solve problems rather than pondering them.</p>

<p>Don&#8217;t be afraid to do something less than perfectly; there can be value in just getting it done. I constantly look back at things I did three months ago &#8211; let alone three years ago, and sometimes three weeks ago &#8211; and I cringe when I think how differently I would do them today. But half the reason I know what I know now is precisely because I <em>didn&#8217;t</em> know it then, and I learned it along the way. Understanding the building blocks of the web is an iterative process, and you&#8217;ll do better if you remember that <strong>you cannot know everything you wish you knew</strong>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/12/14/jquery-ie7-operation-aborted-error/">jQuery IE7 &#8220;Operation Aborted&#8221; Error</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-12-14T00:00:00-06:00" pubdate data-updated="true">Dec 14<span>th</span>, 2007</time>
        
         | <a href="/blog/2007/12/14/jquery-ie7-operation-aborted-error/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I just got done troubleshooting an issue with a page with some jQuery on it. The jQuery was in a script called from the head of the document, and its job was to rearrange some elements into tabs once the page was loaded.</p>

<p>In unpredictable cases (sequential reloads had different results), loading the page in IE7 would lead to an &#8220;Operation aborted&#8221; error that provided no additional information. Through some googling, I found out that this was probably related to IE choking when some script was run against the DOM before the DOM was fully loaded.</p>

<p>What puzzled me was that I was using <code>$.ready()</code> to wrap my jQuery, which was supposed to wait for the DOM, but it didn&#8217;t seem to matter. Then I found <a href="http://channel9.msdn.com/ShowPost.aspx?PostID=215410#215410">this</a> &#8211; it turns out that interacting with the DOM via javascript from within a table can make IE all sorts of angry, while interacting with the DOM via javascript from within a div is just fine.</p>

<p>While my case doesn&#8217;t directly match the example above, it seems very possible that the table-based template I was writing for was the source of the headaches. Changing the base HTML template for the page I was working on wasn&#8217;t immediately in the cards, so I split the offending js file into two pieces &#8211; one in the head of the document that contains some basic functions but didn&#8217;t actually do anything, and another right before the closing body tag that does the actual talking to the DOM &#8211; and that seemed to fix it.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/10/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/8/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/10/08/five-questions/">Five Questions</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/08/04/pausing-office-hours/">Pausing Office Hours</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/27/tech-podcast-recording-tips/">So You&#8217;re Going on a Podcast</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/20/karma-webpack-tape-code-coverage/">Browser Testing and Code Coverage with Karma, Tape, and Webpack</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/11/ttl-podcast/">The TTL Podcast</a>
      </li>
    
  </ul>
</section>
<section>
  <p><a href="http://ttlpodcast.com"><img src="/images/logo-600-600.png" alt="TTL Podcast logo" width="100"></a></p>
  <p>I host the <a href="http://ttlpodcast.com">TTL Podcast</a>, featuring
  conversations with front-end developers at large organizations talking about how they do their jobs.</p>
</section>
<section>
  <h1>Projects</h1>
  <p><a href="https://github.com/rmurphey/js-assessment">js-assessment</a>, a test-driven approach to learning, improving, and assessing JavaScript skills.</p>
  <p><a href="https://github.com/bazaarvoice/scoutfile">scoutfile</a>, an NPM module developed at Bazaarvoice for creating a &#8220;scout&#8221; file to bootstrap client-side JS applications.</p>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Rebecca Murphey -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'rmurphey';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
